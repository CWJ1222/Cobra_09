<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('include/head') %>
    <title>구매 페이지</title>
  </head>
  <body>
    <%- include('include/header') %>
    <main class="max-container">
      <h1>구매 페이지</h1>
      <table border="1" style="width: 100%; text-align: center">
        <thead>
          <tr>
            <th>Product Key</th>
            <th>Name</th>
            <th>Deadline</th>
            <th>Price</th>
            <th>Max Quantity</th>
            <th>Image</th>
            <th>Category ID</th>
            <th>Host ID</th>
          </tr>
        </thead>
        <tbody>
          <% if (products && products.length > 0) { %> <%
          products.forEach(product => { %>
          <tr>
            <td><%= product.product_key %></td>
            <td><%= product.name %></td>
            <td><%= product.deadline %></td>
            <td><%= product.price %></td>
            <td><%= product.max_quantity %></td>
            <td>
              <!-- 이미지 클릭 시 새로운 창 열기 -->
              <a
                href="/buyform/<%= product.product_key %>"
                target="buyform"
                onclick="window.open(this.href, 'buyform', 'width=800,height=600'); return false;"
              >
                <img
                  src="/public/img/<%= product.image %>"
                  alt="<%= product.name %>"
                  style="max-width: 100px"
                />
              </a>
            </td>
            <td><%= product.category_id %></td>
            <td><%= product.host_id %></td>
          </tr>
          <% }) %> <% } else { %>
          <tr>
            <td colspan="8">등록된 상품이 없습니다.</td>
          </tr>
          <% } %>
        </tbody>
      </table>
    </main>
  </body>
</html>
